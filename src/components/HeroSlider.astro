---
import Image from '~/components/common/Image.astro';

const slidesData = [
  {
    image: "/img/fondo_h4.jpg",
    title: "Carpintería Metálica Jose María",
    subtitle: "Especialistas en Cerrajería - Compromiso y Calidad"
  },
  {
    image: "/img/fondo_h2.jpg", 
    title: "Trabajos en Acero", 
    subtitle: "Diseños Personalizados - Garantía de Por Vida"
  }
];

const whatsappNumber = "51928475063"; // Reemplaza con tu número de WhatsApp
const whatsappMessage = "Hola, me interesa conocer más sobre sus servicios de cerrajería";
---

<section id="inicio" class="relative h-screen overflow-hidden">
  <!-- Slides -->
  <div class="relative h-full">
    {slidesData.map((slide, index) => (
      <div 
        class={`absolute inset-0 transition-opacity duration-1000 ease-in-out ${
          index === 0 ? 'opacity-100' : 'opacity-0'
        }`}
        id={`slide-${index}`}
      >
        <!-- Imagen de fondo -->
        <div class="absolute inset-0">
          <Image
            src={slide.image}
            alt={slide.title}
            class="w-full h-full object-cover"
            widths={[1920, 2560]}
            sizes="100vw"
          />
          <!-- Overlay oscuro -->
          <div class="absolute inset-0 bg-black bg-opacity-40"></div>
        </div>

        <!-- Contenido -->
        <div class="relative h-full flex items-center justify-center text-center text-white">
          <div class="max-w-4xl mx-auto px-4">
            <h1 class="text-4xl md:text-6xl font-bold mb-4 animate-fade">
              {slide.title}
            </h1>
            <h2 class="text-xl md:text-2xl text-gray-200 mb-8 animate-fade">
              {slide.subtitle}
            </h2>
            
            <!-- Botón Contáctame con ícono WhatsApp de Font Awesome -->
            <div class="animate-fade">
                        <a 
            href={`https://wa.me/${whatsappNumber}?text=${encodeURIComponent(whatsappMessage)}`}
            target="_blank"
            rel="noopener noreferrer"
            class="inline-flex items-center gap-3 bg-[rgb(219,234,254)] hover:bg-[rgb(191,219,254)] text-gray-800 font-semibold px-8 py-4 rounded-lg transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl"
          >
            <!-- Ícono WhatsApp de Font Awesome -->
            <i class="fab fa-whatsapp text-xl"></i>
            
            <!-- Texto del botón -->
            <span class="text-lg">Contáctame</span>
          </a>
            </div>
          </div>
        </div>
      </div>
    ))}
  </div>

  <!-- Indicadores -->
  <div class="absolute bottom-8 left-1/2 transform -translate-x-1/2 flex space-x-3">
    {slidesData.map((_, index) => (
      <button
        class={`w-3 h-3 rounded-full transition-all ${
          index === 0 ? 'bg-white' : 'bg-white bg-opacity-50'
        }`}
        onclick={`showSlide(${index})`}
      ></button>
    ))}
  </div>

  <!-- Flechas -->
  <button 
    class="absolute left-4 top-1/2 transform -translate-y-1/2 bg-white bg-opacity-20 text-white w-10 h-10 rounded-full flex items-center justify-center hover:bg-opacity-30 transition-all"
    onclick="prevSlide()"
  >
    <i class="fas fa-chevron-left"></i>
  </button>
  <button 
    class="absolute right-4 top-1/2 transform -translate-y-1/2 bg-white bg-opacity-20 text-white w-10 h-10 rounded-full flex items-center justify-center hover:bg-opacity-30 transition-all"
    onclick="nextSlide()"
  >
    <i class="fas fa-chevron-right"></i>
  </button>
</section>

<script>
  let currentSlide = 0;
  const totalSlides = 2;

  function showSlide(index) {
    const currentElement = document.getElementById(`slide-${currentSlide}`);
    if (currentElement) {
      currentElement.style.opacity = '0';
    }
    
    currentSlide = index;
    const nextElement = document.getElementById(`slide-${currentSlide}`);
    if (nextElement) {
      nextElement.style.opacity = '100';
    }
    
    resetAutoPlay();
  }

  function nextSlide() {
    const nextIndex = (currentSlide + 1) % totalSlides;
    showSlide(nextIndex);
  }

  function prevSlide() {
    const prevIndex = (currentSlide - 1 + totalSlides) % totalSlides;
    showSlide(prevIndex);
  }

  // Autoplay
  let autoPlayInterval = setInterval(nextSlide, 5000);

  function resetAutoPlay() {
    if (autoPlayInterval) {
      clearInterval(autoPlayInterval);
    }
    autoPlayInterval = setInterval(nextSlide, 5000);
  }

  document.addEventListener('DOMContentLoaded', function() {
    resetAutoPlay();
  });
</script>